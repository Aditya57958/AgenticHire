{
    "sourceFile": "new-frontend/src/App.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1765095723858,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765095756279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,20 @@\n     console.log('Job Description:', jobDescription);\n     // Here you would typically send this data to your backend\n   };\n \n+  const handleResumeUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n+    const file = e.target.files?.[0];\n+    if (file && file.type === 'application/pdf') {\n+      console.log('Selected PDF file:', file.name);\n+      // Future: Send file to backend/main.py line 80's extract_text_from_pdf_bytes function\n+      // For now, set placeholder text to indicate upload success\n+      setResume(`PDF file uploaded: ${file.name} (text extraction pending backend integration)`);\n+    } else {\n+      alert('Please select a valid PDF file');\n+    }\n+  };\n+\n   return (\n     <div className=\"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\">\n       <h1 className=\"text-4xl font-bold text-gray-800 mb-8\">Job Application Intelligence Assistant</h1>\n       <form onSubmit={handleSubmit} className=\"w-full max-w-2xl bg-white p-8 rounded-lg shadow-md\">\n"
                },
                {
                    "date": 1765095778212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,25 +1,58 @@\n import { useState } from 'react';\n \n function App() {\n   const [resume, setResume] = useState('');\n+  const [resumeFile, setResumeFile] = useState<File | null>(null);\n   const [jobDescription, setJobDescription] = useState('');\n+  const [loading, setLoading] = useState(false);\n+  const [error, setError] = useState<string | null>(null);\n+  const [analysisResult, setAnalysisResult] = useState<any>(null);\n \n-  const handleSubmit = (e: React.FormEvent) => {\n+  const handleSubmit = async (e: React.FormEvent) => {\n     e.preventDefault();\n-    console.log('Resume:', resume);\n-    console.log('Job Description:', jobDescription);\n-    // Here you would typically send this data to your backend\n+    setLoading(true);\n+    setError(null);\n+    setAnalysisResult(null);\n+\n+    const formData = new FormData();\n+    formData.append('step', 'full_process');\n+\n+    if (resumeFile) {\n+      formData.append('resume', resumeFile);\n+    } else {\n+      formData.append('resume_text', resume);\n+    }\n+    formData.append('job_link', jobDescription);\n+\n+    try {\n+      const response = await fetch('http://localhost:8000/process', {\n+        method: 'POST',\n+        body: formData,\n+      });\n+\n+      if (!response.ok) {\n+        const errorData = await response.json();\n+        throw new Error(errorData.error || 'Something went wrong');\n+      }\n+\n+      const data = await response.json();\n+      setAnalysisResult(data);\n+    } catch (err: any) {\n+      setError(err.message);\n+    } finally {\n+      setLoading(false);\n+    }\n   };\n \n   const handleResumeUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n     const file = e.target.files?.[0];\n     if (file && file.type === 'application/pdf') {\n-      console.log('Selected PDF file:', file.name);\n-      // Future: Send file to backend/main.py line 80's extract_text_from_pdf_bytes function\n-      // For now, set placeholder text to indicate upload success\n-      setResume(`PDF file uploaded: ${file.name} (text extraction pending backend integration)`);\n+      setResumeFile(file);\n+      setResume(`PDF file uploaded: ${file.name}`);\n     } else {\n+      setResumeFile(null);\n+      setResume('');\n       alert('Please select a valid PDF file');\n     }\n   };\n \n"
                },
                {
                    "date": 1765095785588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,13 +94,57 @@\n         <div className=\"flex items-center justify-between\">\n           <button\n             type=\"submit\"\n             className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n+            disabled={loading}\n           >\n-            Analyze Application\n+            {loading ? 'Analyzing...' : 'Analyze Application'}\n           </button>\n         </div>\n       </form>\n+\n+      {loading && <p className=\"text-blue-600 mt-4\">Loading...</p>}\n+      {error && <p className=\"text-red-600 mt-4\">Error: {error}</p>}\n+\n+      {analysisResult && (\n+        <div className=\"w-full max-w-2xl bg-white p-8 rounded-lg shadow-md mt-8\">\n+          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Analysis Results</h2>\n+          <div className=\"mb-4\">\n+            <h3 className=\"text-xl font-semibold text-gray-700\">HR Email:</h3>\n+            <p className=\"text-gray-600 whitespace-pre-wrap\">{analysisResult.email}</p>\n+          </div>\n+          <div className=\"mb-4\">\n+            <h3 className=\"text-xl font-semibold text-gray-700\">Interview Questions:</h3>\n+            <ul className=\"list-disc list-inside text-gray-600\">\n+              {analysisResult.questions.map((q: string, index: number) => (\n+                <li key={index}>{q}</li>\n+              ))}\n+            </ul>\n+          </div>\n+          <div className=\"mb-4\">\n+            <h3 className=\"text-xl font-semibold text-gray-700\">Modified Resume Text:</h3>\n+            <p className=\"text-gray-600 whitespace-pre-wrap\">{analysisResult.modified_resume_text}</p>\n+          </div>\n+          {analysisResult.warning && (\n+            <div className=\"mb-4 text-yellow-600\">\n+              <h3 className=\"text-xl font-semibold text-gray-700\">Warning:</h3>\n+              <p>{analysisResult.warning}</p>\n+            </div>\n+          )}\n+          {analysisResult.modified_resume_pdf_base64 && (\n+            <div className=\"mb-4\">\n+              <h3 className=\"text-xl font-semibold text-gray-700\">Modified Resume PDF:</h3>\n+              <a\n+                href={`data:application/pdf;base64,${analysisResult.modified_resume_pdf_base64}`}\n+                download=\"modified_resume.pdf\"\n+                className=\"text-blue-500 hover:underline\"\n+              >\n+                Download Modified Resume PDF\n+              </a>\n+            </div>\n+          )}\n+        </div>\n+      )}\n     </div>\n   );\n }\n \n"
                }
            ],
            "date": 1765095723858,
            "name": "Commit-0",
            "content": "import { useState } from 'react';\n\nfunction App() {\n  const [resume, setResume] = useState('');\n  const [jobDescription, setJobDescription] = useState('');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Resume:', resume);\n    console.log('Job Description:', jobDescription);\n    // Here you would typically send this data to your backend\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4\">\n      <h1 className=\"text-4xl font-bold text-gray-800 mb-8\">Job Application Intelligence Assistant</h1>\n      <form onSubmit={handleSubmit} className=\"w-full max-w-2xl bg-white p-8 rounded-lg shadow-md\">\n        <div className=\"mb-6\">\n          <label htmlFor=\"resume\" className=\"block text-gray-700 text-sm font-bold mb-2\">\n            Resume (Paste text or upload file):\n          </label>\n          <textarea\n            id=\"resume\"\n            className=\"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 resize-none\"\n            placeholder=\"Paste your resume text here...\"\n            value={resume}\n            onChange={(e) => setResume(e.target.value)}\n          ></textarea>\n          <input\n            type=\"file\"\n            id=\"resumeFile\"\n            accept=\".pdf\"\n            className=\"mt-3 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-500 file:text-white hover:file:bg-blue-700\"\n            onChange={(e) => handleResumeUpload(e)}\n          ></input>\n        </div>\n        <div className=\"mb-6\">\n          <label htmlFor=\"jobDescription\" className=\"block text-gray-700 text-sm font-bold mb-2\">\n            Job Description (Paste text or URL):\n          </label>\n          <textarea\n            id=\"jobDescription\"\n            className=\"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-40 resize-none\"\n            placeholder=\"Paste the job description text or URL here...\"\n            value={jobDescription}\n            onChange={(e) => setJobDescription(e.target.value)}\n          ></textarea>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <button\n            type=\"submit\"\n            className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n          >\n            Analyze Application\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default App;"
        }
    ]
}